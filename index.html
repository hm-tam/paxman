<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>Parallax module</title>
  <link rel="stylesheet" href="style.css">
  <script src="jquery.js"></script>
  <script src="module.js"></script>
</head>
<body>

<div id="pax">
  <section class="interlace" data-height="auto-screen" data-scroll="top" data-speed=".135" data-bg="inter-1.png"></section>
  <section class="interlace" data-height="auto-screen" data-bg="inter-1.png" data-speed=".35" data-offy=".25">
    <!-- <div class='px-child circle one' data-scroll="top"></div> -->
  </section>
  <section class="interlace" data-height="auto-screen" data-bg="inter-1.png" data-speed=".6" data-offy=".1"></section>
  <section data-height="auto-screen">
    <div class="content">
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ut mi sit amet odio mollis molestie. Vivamus vel placerat purus. Sed ut quam urna. Nulla facilisi. Nunc hendrerit venenatis nisi, vel iaculis magna gravida sollicitudin. In sagittis ante a tellus interdum eu pretium ligula varius. Duis malesuada vehicula tellus. Pellentesque gravida augue vitae velit gravida a sodales libero imperdiet. Aliquam erat volutpat. Aliquam a mattis nunc. Nullam tristique vulputate arcu a tempor.
      </p>
    </div>
  </section>
  <section data-height="full-screen" data-scroll="bottom" data-bg="">
    <div class='px-child circle two' data-offset-fn="transit" data-offset-x="" data-offset-y=""></div>
    <div class='px-child circle two' data-offset-fn="transit" data-offset-x="" data-offset-y=""></div>
    <div class='px-child circle two' data-offset-fn="transit" data-offset-x="" data-offset-y=""></div>
    <div class='px-child circle two' data-offset-fn="transit" data-offset-x="" data-offset-y=""></div>
    <div class='px-child circle two' data-offset-fn="transit" data-offset-x="" data-offset-y=""></div>
    <div class='px-child circle two' data-offset-fn="transit" data-offset-x="" data-offset-y=""></div>
    <div class='px-child circle two' data-offset-fn="transit" data-offset-x="" data-offset-y=""></div>
    <div class='px-child circle two' data-offset-fn="transit" data-offset-x="" data-offset-y=""></div>
    <div class='px-child circle two' data-offset-fn="transit" data-offset-x="" data-offset-y=""></div>
  </section>
  <section data-height="auto-screen">
    <div class="content">
      <p>In ligula odio, iaculis id elementum vitae, commodo ac urna. Donec ac justo varius mauris convallis rhoncus. In hac habitasse platea dictumst. Suspendisse potenti. Donec non lorem ut libero congue pellentesque. Ut eu turpis tortor. Sed quis sapien justo, ut tempor ipsum. Maecenas sed tortor massa, in facilisis nibh. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nunc volutpat, lacus in viverra venenatis, neque leo aliquet nisi, ut dapibus lectus dolor ut nunc. Donec ac velit a erat tincidunt volutpat. Ut faucibus varius mattis. Maecenas at quam libero, vel facilisis orci. In varius quam ante, non mollis dolor. Vestibulum commodo scelerisque congue. Sed hendrerit condimentum turpis, eget interdum ipsum semper non.</p>
    </div>
  </section>
  <section data-height="full-screen" data-bg="">
    <!-- <div class="px-child object" data-offset_opacity="0" data-start="bottom"></div> -->
  </section>
</div>




  <!-- <div class="box">
    <div class='circle one'></div>
  </div> -->
</body>
<script type="text/javascript">
(function($) {

  // initiate plugin
  window.customFeatures = new Paxman();

  customFeatures.extend('transit',function (item, parent, count){
    // rule
    // diff = end - start; (of subject)
    // currentpos = diff * parent.pct // (pct +1 if start-scroll=bottom)

    var diffX = parent.width - item.index * 150,
        tgtX = parent.pct * diffX
        

    if(tgtX >= parent.width/2) tgtX = parent.width/2

    var style = { x: tgtX,
                  y: (item.index*100) + Math.sin(count)*250
                }
    
    return style // need to return tgt css object ie 'transform':'translate(0px,1000px)'
  })


})(jQuery);

</script>
